<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strawberry Patch Catch</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
body {margin:0;font-family:'Press Start 2P',cursive;background-color:#ffc0d9;overflow:hidden;}
.btn {display:inline-block;padding:10px 20px;font-size:14px;color:white;background:linear-gradient(135deg,#ffb6c1,#ff69b4);border:none;border-radius:25px;cursor:pointer;margin:5px;font-family:'Press Start 2P',cursive;}
.btn:hover{opacity:0.8;}
.screen {position:absolute;width:450px;height:600px;top:50%;left:50%;transform:translate(-50%,-50%);border:4px solid #fff;text-align:center;display:none;flex-direction:column;justify-content:center;align-items:center;background-image:url('https://i.pinimg.com/564x/39/81/c2/3981c2407927852d898fa90c7760826e.jpg');background-size:cover;background-position:center;}
#titleScreen h1 {color:white;text-shadow:3px 3px 8px #ffb6c1;font-size:24px;}
#gameArea {position:absolute;width:450px;height:600px;top:50%;left:50%;transform:translate(-50%,-50%);overflow:hidden;display:none;border:4px solid #fff;background-image:url('https://i.pinimg.com/564x/39/81/c2/3981c2407927852d898fa90c7760826e.jpg');background-size:cover;background-position:center;}
.character {position:absolute;width:64px;height:64px;bottom:10px;}
.strawberry {position:absolute;width:32px;height:32px;}
#score{position:absolute;top:10px;left:10px;font-size:20px;color:white;text-shadow:2px 2px 5px pink;}
#muteBtn{position:absolute;top:10px;right:10px;font-size:14px;z-index:20;}
#charactersContainer{position:relative;width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:15px;margin-top:20px;}
#charactersContainer div{display:inline-block;text-align:center;}
#charactersContainer img{width:64px;height:64px;cursor:pointer;border:2px solid white;border-radius:10px;}
.characterName{font-size:12px;color:white;text-shadow:3px 3px 8px #ffb6c1;margin-top:5px;}
#countdownText{font-size:60px;color:white;text-shadow:2px 2px 5px pink;}
.pixel-cloud {position:absolute;width:10px;height:10px;background:white;opacity:0.6;animation:cloudMove linear infinite;}
@keyframes cloudMove {0%{transform:translateX(-20px);}100%{transform:translateX(470px);}}
.star {position:absolute;width:3px;height:3px;background:white;border-radius:50%;opacity:0.8;animation:starMove linear infinite;}
@keyframes starMove {0%{transform:translateY(0);}100%{transform:translateY(-600px);}}
</style>
</head>
<body>

<!-- Game Area Mute Button -->
<div id="gameArea">
    <div id="score">Score: 0</div>
    <button id="muteBtn" class="btn">Mute Music</button>
</div>

<!-- Title Screen -->
<div id="titleScreen" class="screen" style="display:flex;">
    <h1>Strawberry Patch Catch</h1>
    <h2>Press left and right arrow keys to move</h2>
    <button id="playBtn" class="btn">Play</button>
</div>

<!-- Character Select -->
<div id="characterScreen" class="screen">
    <h2>Select Your Character</h2>
    <div id="charactersContainer">
        <div><img src="https://www.dropbox.com/scl/fi/t7dgxbt0js52kiqq0peaa/hyunjin.png?rlkey=pjh820nch8w1axlljs0vqdd5l&st=uuu1dm28&dl=1" class="characterSelect" data-char="hyunjin"><div class="characterName">Hyunjin</div></div>
        <div><img src="https://www.dropbox.com/scl/fi/eibv62qbsmlcfoar68kgu/mystery.png?rlkey=i2aqfkm89qthff4evtwlzj6rq&st=hxeqx2kl&dl=1" class="characterSelect" data-char="mystery"><div class="characterName">Mystery</div></div>
        <div><img src="https://www.dropbox.com/scl/fi/06eecluwymoi6nruervn6/konata.png?rlkey=w7dor9qsn06ytba06go3vp2it&st=z2taxzbf&dl=1" class="characterSelect" data-char="konata"><div class="characterName">Konata</div></div>
        <div><img src="https://www.dropbox.com/scl/fi/7emxx1jux6hisl7drywa5/miku.png?rlkey=a17yhcxlm3x42oi7820voqfb3&st=nh6wuc5i&dl=1" class="characterSelect" data-char="miku"><div class="characterName">Miku</div></div>
        <div><img src="https://www.dropbox.com/scl/fi/1dz0xjzdddq8x9av203j7/edward.png?rlkey=k9uka5md133o40shfj4xw0hkk&st=sars79zv&dl=1" class="characterSelect" data-char="edward"><div class="characterName">Edward</div></div>
        <div><img src="https://www.dropbox.com/scl/fi/m3vgah8z692cssfm339r4/my-melody.png?rlkey=i9bw57g4jrjzl769mn7q70cuc&st=rwdt6ew4&dl=1" class="characterSelect" data-char="mymelody"><div class="characterName">My Melody</div></div>
        <div><img src="https://www.dropbox.com/scl/fi/3novbnwl5cpykfqeuaoci/toph.png?rlkey=ftxvejil8b07tozislpz7cp8j&st=f5ec3nj4&dl=1" class="characterSelect" data-char="toph"><div class="characterName">Toph</div></div>
        <div><img src="https://www.dropbox.com/scl/fi/lbls2lwlj8jwwic8wwphu/ichigo.png?rlkey=42l7dnaz1lw7x8pou4mubd70s&st=ydg7oq0k&dl=1" class="characterSelect" data-char="ichigo"><div class="characterName">Ichigo</div></div>
    </div>
</div>

<!-- Countdown -->
<div id="countdownScreen" class="screen">
    <h1 id="countdownText">3</h1>
</div>

<!-- Game Over -->
<div id="gameOverScreen" class="screen">
    <h1>Game Over!</h1>
    <h2>Your Score:</h2>
    <h2 id="finalScore">0</h2>
    <button id="returnMenuBtn" class="btn">Return to Menu</button>
</div>

<!-- Sounds -->
<audio id="menuClick" src="https://www.dropbox.com/scl/fi/7uf6su3boq12kyse80veb/mouse-click-290204.mp3?rlkey=emskhbjk4non8fxc5l5oqy4ln&st=dv4tkddz&dl=1"></audio>
<audio id="failSound" src="https://www.dropbox.com/scl/fi/x3cy1eu0lhi8k3h2by7bm/brass-fail-11-a-207140.mp3?rlkey=8cw18tbo5nfncwf7ndsikym32&st=dbeka5y6&dl=1"></audio>

<!-- YouTube Music -->
<div id="player"></div>
<script src="https://www.youtube.com/iframe_api"></script>

<script>
let player,isMuted=false,selectedCharacter='',characterEl,keys={left:false,right:false},score=0,gameInterval,strawberryInterval,maxScore=9999,gameOverFlag=false;
const gameAreaEl=document.getElementById('gameArea'),scoreEl=document.getElementById('score');

// Buttons
document.getElementById('playBtn').addEventListener('click',()=>{document.getElementById('menuClick').play(); showScreen('characterScreen');});
document.querySelectorAll('.characterSelect').forEach(img=>{
    img.addEventListener('click',()=>{
        document.getElementById('menuClick').play();
        selectedCharacter=img.src;
        startCountdown();
    });
});
document.getElementById('returnMenuBtn').addEventListener('click',()=>{
    document.getElementById('menuClick').play();
    resetGame();
    showScreen('titleScreen');
});

// YouTube setup
function onYouTubeIframeAPIReady(){
    player=new YT.Player('player',{height:'0', width:'0',videoId:'epPZTCDSYaQ',playerVars:{autoplay:0,loop:1,playlist:'epPZTCDSYaQ',controls:0,modestbranding:1}});
}
document.getElementById('muteBtn').addEventListener('click',()=>{
    if(!player) return;
    if(isMuted){player.playVideo(); isMuted=false; document.getElementById('muteBtn').innerText='Mute Music';}
    else{player.pauseVideo(); isMuted=true; document.getElementById('muteBtn').innerText='Unmute Music';}
});

// Clouds and stars
for(let i=0;i<15;i++){
    let cloud=document.createElement('div'); cloud.className='pixel-cloud';
    cloud.style.top=Math.random()*590+'px'; cloud.style.left=Math.random()*440+'px'; cloud.style.width=(5+Math.random()*5)+'px'; cloud.style.height=(5+Math.random()*5)+'px'; cloud.style.animationDuration=(20+Math.random()*20)+'s';
    document.body.appendChild(cloud);
}
for(let i=0;i<50;i++){
    let star=document.createElement('div'); star.className='star';
    star.style.top=Math.random()*1080+'px'; star.style.left=Math.random()*1920+'px'; star.style.animationDuration=(5+Math.random()*5)+'s';
    document.body.appendChild(star);
}

// Countdown
function startCountdown(){
    gameOverFlag=false;
    showScreen('countdownScreen');
    const countdownText=document.getElementById('countdownText');
    let sequence=['3','2','1'], i=0;
    function nextStep(){
        countdownText.innerText=sequence[i];
        i++;
        if(i<sequence.length) setTimeout(nextStep,1500);
        else setTimeout(startGame,500);
    }
    nextStep();
}

// Game Logic
function startGame(){
    gameOverFlag=false;
    showScreen('game');
    score=0; scoreEl.innerText='Score: '+score;
    characterEl=document.createElement('img');
    characterEl.src=selectedCharacter; characterEl.className='character';
    characterEl.style.left='193px'; gameAreaEl.appendChild(characterEl);

    if(player){player.seekTo(0); if(!isMuted) player.playVideo();}

    document.addEventListener('keydown',e=>{
        if(e.key==='ArrowLeft') keys.left=true;
        if(e.key==='ArrowRight') keys.right=true;
    });
    document.addEventListener('keyup',e=>{
        if(e.key==='ArrowLeft') keys.left=false;
        if(e.key==='ArrowRight') keys.right=false;
    });

    gameInterval=setInterval(()=>{
        if(gameOverFlag) return;
        if(keys.left){let left=parseInt(characterEl.style.left); if(left>0) characterEl.style.left=(left-10)+'px';}
        if(keys.right){let left=parseInt(characterEl.style.left); if(left<450-64) characterEl.style.left=(left+10)+'px';}
    },16);

    strawberryInterval=setInterval(spawnStrawberry,700);
}

function spawnStrawberry(){
    if(gameOverFlag) return;
    let s=document.createElement('img');
    s.src='https://static.vecteezy.com/system/resources/thumbnails/069/167/465/small_2x/pixelated-strawberry-offering-a-retro-gaming-charm-with-vibrant-digital-aesthetics-png.png';
    s.className='strawberry';
    let left=Math.random()*(450-32); s.style.left=left+'px'; s.style.top='0px';
    gameAreaEl.appendChild(s);
    let fallInterval=setInterval(()=>{
        if(gameOverFlag){clearInterval(fallInterval); s.remove(); return;}
        let top=parseInt(s.style.top); 
        s.style.top=(top+3+Math.random()*2)+'px';
        let charLeft=parseInt(characterEl.style.left);
        let charRight=charLeft+64; let charTop=600-64;
        if(top+32>=charTop && top+32<=charTop+64 && parseInt(s.style.left)+16>=charLeft && parseInt(s.style.left)+16<=charRight){
            score++; scoreEl.innerText='Score: '+score;
            s.remove(); clearInterval(fallInterval);
        } else if(top>600){
            s.remove(); clearInterval(fallInterval); gameOver();
        }
    },16);
}

function gameOver(){
    if(gameOverFlag) return;
    gameOverFlag=true;
    clearInterval(gameInterval); clearInterval(strawberryInterval);
    if(characterEl) characterEl.remove();
    showScreen('gameOverScreen');
    document.getElementById('finalScore').innerText=score;
    if(player) player.pauseVideo();
    document.getElementById('failSound').play();
}

function resetGame(){
    clearInterval(gameInterval); clearInterval(strawberryInterval);
    if(characterEl) characterEl.remove();
    score=0; scoreEl.innerText='Score: '+score;
}

function showScreen(screen){
    document.querySelectorAll('.screen').forEach(s=>s.style.display='none');
    gameAreaEl.style.display='none';
    if(screen==='game') gameAreaEl.style.display='block';
    else document.getElementById(screen).style.display='flex';
}
</script>
</body>
</html>
